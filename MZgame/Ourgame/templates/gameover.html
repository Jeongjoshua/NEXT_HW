<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ê²Œì„ ì¢…ë£Œ</title>
        {% load static %}
        <link rel="stylesheet" href="{% static 'css/gameover.css' %}" />
    </head>
    <body>
        <div class="container">
            <div class="gameover">
                <h1>GAME OVER</h1>
            </div>
            <img class="large-img" src="{% static 'images/vv.png' %}" alt="Game Image" width="70%"/>
            <div class="ranking">
                <h2>ë­í‚¹</h2>
                <ol>
                    {% for record in top_records %}
                    <li>{{ record.name }} - {{ record.score }}</li>
                    {% endfor %}
                </ol>
            </div>

            <div class="myranking">
                <p>ë‚´ ìˆœìœ„: {{ my_record.id }}</p>
                <p>{{ player_name }}</p>
                <p>ROUND: {{ my_record.round_number }}</p>
                <p>TIME: {{ my_record.play_time }}</p>
            </div>
        </br><button onclick="location.href='{% url 'name' %}'">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
        </div>
        <script>
            const myRank = document.querySelector('.myranking').dataset.myRank;
            const playerName = document.querySelector('.myranking').dataset.playerName;
            const playTime = document.querySelector('.myranking').dataset.playTime;
            document.addEventListener('DOMContentLoaded', (event) => {
            const container = document.querySelector('.container');
            const containerRect = container.getBoundingClientRect();
            let lastCryPosition = null;

            function createFallingCry() {
                const cry = document.createElement('div');
                cry.textContent = 'ğŸ˜­';
                cry.classList.add('falling-cry');

                let cryPosition;
                do {
                    cryPosition = Math.random() * window.innerWidth;
                } while (
                    (cryPosition > containerRect.left - 30 && cryPosition < containerRect.right + 30) ||
                    (lastCryPosition && Math.abs(cryPosition - lastCryPosition) < 30)
                );

                lastCryPosition = cryPosition;

                cry.style.left = cryPosition + 'px';
                cry.style.animationDuration = (Math.random() * 2 + 5) + 's'; // 5ì´ˆì—ì„œ 7ì´ˆ ì‚¬ì´ì˜ ëœë¤ ì‹œê°„ ì„¤ì •
                document.body.appendChild(cry);

                // ì• ë‹ˆë©”ì´ì…˜ ëë‚œ í›„ ìš”ì†Œ ì œê±°
                cry.addEventListener('animationend', () => {
                    document.body.removeChild(cry);
                });
            }

            // ì¼ì • ê°„ê²©ìœ¼ë¡œ 'ã… ' ìƒì„±
            setInterval(createFallingCry, 1000);
        });
        </script>
    </body>
</html>
